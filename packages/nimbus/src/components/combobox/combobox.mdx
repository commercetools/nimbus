---
id: Components-ComboBox
title: ComboBox
description: A combo box combines a text input with a dropdown list, allowing users to filter a list of options to items matching a query.
documentState: InitialDraft
order: 999
menu:
  - Components
  - Inputs
  - ComboBox
tags:
  - component
---

# ComboBox input

A combobox is an input that combines a text field with a pop-up list of options. It allows users to select a value from a predefined list or enter their own custom value.

## Overview

The combobox component provides both selection and text input capabilities. It displays a list of options that users can choose from, while also allowing them to type directly into the text field. This functionality improves user experience by assisting with value selection and, in some cases, prevents invalid entries.

### Resources

Deep dive into implementation details and access the Nimbus design library.

[Figma library](https://www.figma.com/design/gHbAJGfcrCv7f2bgzUQgHq/NIMBUS-Guidelines?node-id=1852-4333&m=dev)

## Variables

Get familiar with the features.

### Visual options

#### Size
The medium size of the combobox is default, the small sizes are meant for more compact uses.

```jsx-live
const App = () => {
  const options = [
    { id: "seasonal", name: "Seasonal", description: "Grower's choice" },
    { id: "greens", name: "Greens", description: "Leafy and nutritious" },
    { id: "fruit", name: "Fruit", description: "Sweet and tart" },
    { id: "root-vegetables", name: "Root Vegetables", description: "Firm and hearty" }
  ];

  return (
    <Stack direction="horizontal" gap="400" alignItems="flex-start">
      <ComboBox.Root size="md" items={options} placeholder="Search...">
        <ComboBox.Trigger />
        <ComboBox.Popover>
          <ComboBox.ListBox>
            {(item) => (
              <ComboBox.Option id={item.id} textValue={item.name}>
                <Stack gap="100">
                  <Text textStyle="sm">{item.name}</Text>
                  <Text textStyle="xs" color="neutral.11">{item.description}</Text>
                </Stack>
              </ComboBox.Option>
            )}
          </ComboBox.ListBox>
        </ComboBox.Popover>
      </ComboBox.Root>
      
      <ComboBox.Root size="sm" items={options} placeholder="Search...">
        <ComboBox.Trigger />
        <ComboBox.Popover>
          <ComboBox.ListBox>
            {(item) => (
              <ComboBox.Option id={item.id} textValue={item.name}>
                <Stack gap="100">
                  <Text textStyle="sm">{item.name}</Text>
                  <Text textStyle="xs" color="neutral.11">{item.description}</Text>
                </Stack>
              </ComboBox.Option>
            )}
          </ComboBox.ListBox>
        </ComboBox.Popover>
      </ComboBox.Root>
    </Stack>
  )
}
```

#### Appearances
Combobox supports solid and ghost styles.

```jsx-live
const App = () => {
  const options = [
    { id: "seasonal", name: "Seasonal", description: "Grower's choice" },
    { id: "greens", name: "Greens", description: "Leafy and nutritious" },
    { id: "fruit", name: "Fruit", description: "Sweet and tart" },
    { id: "root-vegetables", name: "Root Vegetables", description: "Firm and hearty" }
  ];

  return (
    <Stack direction="horizontal" gap="400" alignItems="flex-start">
      <ComboBox.Root variant="solid" items={options} placeholder="Search...">
        <ComboBox.Trigger />
        <ComboBox.Popover>
          <ComboBox.ListBox>
            {(item) => (
              <ComboBox.Option id={item.id} textValue={item.name}>
                <Stack gap="100">
                  <Text textStyle="sm">{item.name}</Text>
                  <Text textStyle="xs" color="neutral.11">{item.description}</Text>
                </Stack>
              </ComboBox.Option>
            )}
          </ComboBox.ListBox>
        </ComboBox.Popover>
      </ComboBox.Root>
      
      <ComboBox.Root variant="ghost" items={options} placeholder="Search...">
        <ComboBox.Trigger />
        <ComboBox.Popover>
          <ComboBox.ListBox>
            {(item) => (
              <ComboBox.Option id={item.id} textValue={item.name}>
                <Stack gap="100">
                  <Text textStyle="sm">{item.name}</Text>
                  <Text textStyle="xs" color="neutral.11">{item.description}</Text>
                </Stack>
              </ComboBox.Option>
            )}
          </ComboBox.ListBox>
        </ComboBox.Popover>
      </ComboBox.Root>
    </Stack>
  )
}
```

#### Selection types
Single and multi-select is supported by comboboxes.

```jsx-live
const App = () => {
  const options = [
    { id: "surprise-me", name: "Surprise me", description: "A mix of delights" },
    { id: "toys-only", name: "Toys only", description: "Balls, stuffies, and tug toys" },
    { id: "treats-only", name: "Treats only", description: "Chews, bites, and crunchy snacks" },
    { id: "heavy-chewers", name: "Heavy chewers", description: "Only difficult to destroy toys" }
  ];

  return (
    <Stack direction="horizontal" gap="400" alignItems="flex-start">
      <ComboBox.Root items={options} placeholder="Search...">
        <ComboBox.Trigger />
        <ComboBox.Popover>
        <ComboBox.ListBox>
          {(item) => (
            <ComboBox.Option id={item.id} textValue={item.name}>
              <Stack gap="100">
                <Text textStyle="sm">{item.name}</Text>
                <Text textStyle="xs" color="neutral.11">{item.description}</Text>
              </Stack>
            </ComboBox.Option>
              )}
          </ComboBox.ListBox>
        </ComboBox.Popover>
      </ComboBox.Root>

      <ComboBox.Root
        selectionMode="multiple"
        items={options}
        placeholder="Search..."
      >
        <ComboBox.Trigger />
        <ComboBox.Popover>
          <ComboBox.ListBox>
        {(item) => (
          <ComboBox.Option id={item.id} textValue={item.name}>
            <Stack gap="100">
              <Text textStyle="sm">{item.name}</Text>
              <Text textStyle="xs" color="neutral.11">{item.description}</Text>
            </Stack>
          </ComboBox.Option>
            )}
          </ComboBox.ListBox>
        </ComboBox.Popover>
      </ComboBox.Root>
    </Stack>
  )
}
```

### Async Loading

ComboBox supports async data loading by managing the async state externally using React Stately's `useAsyncList` hook. This pattern gives you full control over data fetching and works seamlessly with ComboBox's filtering and selection features.

**Use cases:**
- Loading large datasets on demand
- Providing search suggestions from a server
- Fetching filtered results based on user input

```jsx-live
const App = () => {
  const [error, setError] = useState(null);
  const minSearchLength = 2;

  // Manage async data loading with useAsyncList
  const list = useAsyncList({
    async load({ signal, filterText }) {
      setError(null);

      // Don't load if below minimum search length
      if (!filterText || filterText.length < minSearchLength) {
        return { items: [] };
      }

      try {
        const response = await fetch(
          `https://swapi.py4e.com/api/people/?search=${encodeURIComponent(filterText)}`,
          { signal }
        );

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();
        return { items: data.results || [] };
      } catch (err) {
        if (err.name === "AbortError") {
          throw err;
        }
        setError(err.message);
        return { items: [] };
      }
    }
  });

  // Add debouncing to reduce API calls while typing
  const debouncedSetFilterText = useDebouncedCallback(
    (value) => {
      list.setFilterText(value);
    },
    300
  );

  return (
    <FormField.Root invalid={!!error}>
      <ComboBox.Root
        label="Search Star Wars Characters"
        placeholder="Type to search (min 2 characters)..."
        items={list.items}
        inputValue={list.filterText}
        onInputChange={debouncedSetFilterText}
        isLoading={list.loadingState === "loading"}
        renderEmptyState={({ isLoading }) => {
          if (isLoading) {
            return <Text padding="300">Loading...</Text>;
          }
          if (!list.filterText || list.filterText.length < minSearchLength) {
            return <Text padding="300">Type at least {minSearchLength} characters to search</Text>;
          }
          return <Text padding="300">No results found</Text>;
        }}
      >
        <ComboBox.Trigger />
        <ComboBox.Popover>
          <ComboBox.ListBox>
            {(character) => (
              <ComboBox.Option textValue={character.name}>
                <Stack gap="100">
                  <Text textStyle="sm">{character.name}</Text>
                  <Text textStyle="xs" color="neutral.11">
                    {character.gender} â€¢ Born {character.birth_year}
                  </Text>
                </Stack>
              </ComboBox.Option>
            )}
          </ComboBox.ListBox>
        </ComboBox.Popover>
      </ComboBox.Root>
      {error && <FormField.ErrorMessage>{error}</FormField.ErrorMessage>}
    </FormField.Root>
  );
};
```

**Key features of this pattern:**
- **External State Management:** Full control over async logic using React Stately's `useAsyncList`
- **Debouncing:** Use `useDebouncedCallback` from `use-debounce` to reduce API calls while typing
- **Minimum Search Length:** Implement custom validation in the `load` function
- **Automatic Cancellation:** `useAsyncList` cancels previous requests via AbortSignal
- **Loading States:** Access `list.loadingState` to display loading indicators
- **Error Handling:** Manage errors in your `load` function with full control

## Guidelines

A combobox combines a text input with a dropdown list, allowing users to type a value or select from predefined options.

### Best practices

- **Provide Instant Feedback:** Filter results in real-time as users type.
- **Handle No Results Graciously:** Display a clear message when no matching options are found.
- **Optimize for Keyboard Navigation:** Ensure full functionality using only the keyboard.
- **Consider Performance:** For very long lists, implement virtualization or lazy loading to prevent performance issues.
- **Offer Clear/Reset Option:** Provide a way for users to clear their selection if needed.
- **Match Input to Options:** If the user types a value that exactly matches an option, automatically select it.

### Usage

Users interact with a combobox by typing to filter options or by selecting from the dropdown list, expecting the component to dynamically narrow choices and allow either a selection or custom entry.

> [!TIP]\
> When to use

- Allowing custom input alongside predefined options.
- Filtering long lists.
- Providing suggestions as a user types.

> [!CAUTION]\
> When not to use

- Only predefined options are allowed.
- The list of options is very short (e.g., 2-5 options).
- Multi-selection is the primary goal without typing.
- Real-time validation of complex custom input is difficult.

### Intuitive interactions

A well-designed combobox enhances user efficiency and accuracy by offering flexible input methods with clear, dynamic feedback.

> [!TIP]\
> **Do**
>
> - Provide a clear and concise label.
> - Filter options dynamically as the user types.
> - Support both keyboard and mouse interactions.
> - Offer clear feedback for all states (focus, hover, active, disabled, invalid).
> - Ensure accessibility with appropriate ARIA attributes.
> - Pre-populate with common values if applicable.

<img src="/images/combobox/combobox-do.png" alt="combobox do guideline" width="316px" />

> [!CAUTION]\
> **Don't**
>
> - Use for simple dropdowns where no custom input is needed (use a select component instead).
> - Neglect to provide feedback when no options match the input.
> - Force users to type an exact match if a selection from the list is expected.
> - Rely solely on visual cues; provide ARIA attributes for screen readers.
> - Display an overwhelming number of options without filtering or pagination.

<img src="/images/combobox/combobox-dont.png" alt="combobox do guideline" width="316px" />

## Specs

### Features

- **Dynamic Filtering:** Options are filtered in real-time as users type
- **Keyboard Navigation:** Full keyboard support with arrow keys and enter
- **Custom Values:** Allows users to enter values not in the predefined list
- **Multi-Selection:** Supports both single and multiple selection modes
- **Accessibility:** Built-in ARIA attributes and screen reader support
- **Loading States:** Shows loading indicators during async operations

## Properties

<PropsTable id="ComboBox" />

## Accessibility

Accessibility ensures that digital content and functionality are usable by everyone, including people with disabilities, by addressing visual, auditory, cognitive, and physical limitations.

```jsx-live
const App = () => {
  const options = [
    { id: "seasonal", name: "Seasonal", description: "Grower's choice" },
    { id: "greens", name: "Greens", description: "Leafy and nutritious" },
    { id: "fruit", name: "Fruit", description: "Sweet and tart" },
    { id: "root-vegetables", name: "Root Vegetables", description: "Firm and hearty" }
  ];

  return (
    <ComboBox.Root 
      selectionMode="multiple"
      items={options} 
      placeholder="Search..."
      aria-label="Food category selection"
      isRequired
    >
      <ComboBox.Trigger />
      <ComboBox.Popover>
        <ComboBox.ListBox>
          {(item) => (
            <ComboBox.Option id={item.id} textValue={item.name}>
              <Stack gap="100">
                <Text textStyle="sm">{item.name}</Text>
                <Text textStyle="xs" color="neutral.11">{item.description}</Text>
              </Stack>
            </ComboBox.Option>
          )}
        </ComboBox.ListBox>
      </ComboBox.Popover>
    </ComboBox.Root>
  )
}
```

## Specs

<PropsTable id="ComboBox" />

## Accessibility

This component is built with React Aria and follows WCAG 2.1 AA guidelines.

### Keyboard Navigation

| Key          | Action                                      |
| ------------ | ------------------------------------------- |
| `Tab`        | Move focus to/from combobox                 |
| `Enter`      | Select highlighted option or create custom option |
| `Space`      | Toggle popover open/closed when focused     |
| `ArrowDown`  | Move focus to next option                   |
| `ArrowUp`    | Move focus to previous option               |
| `Home`       | Move focus to first option                  |
| `End`        | Move focus to last option                   |
| `Escape`     | Close popover and clear focus               |
| `Backspace`  | Remove last selected tag (multi-select mode) |

### Screen Reader Support

- Properly announces combobox role and state
- Announces open/closed state of popover
- Announces selected options
- Announces filter results count
- Announces loading state
- Provides descriptive labels for all interactive elements

### Accessibility Standards

- Always provide a visible label for the input.
- If a visible label is not used, provide an `aria-label` or `aria-labelledby` for screen readers.
- Ensure proper ARIA roles (`combobox`, `listbox`, `option`) and attributes (`aria-expanded`, `aria-autocomplete`, `aria-activedescendant`) are used.
- Ensure sufficient color contrast for all elements (text, borders, icons).
- Communicate errors clearly, using both visual cues (e.g., color) and descriptive error messages.
- Clearly indicate the focused and selected states.

### Resources

- [Adobe Spectrum ComboBox](https://spectrum.adobe.com/page/combo-box/)
- [React Spectrum ComboBox](https://react-spectrum.adobe.com/react-spectrum/ComboBox.html)
- [W3C ARIA Authoring Practices Guide (APG) - Combobox Pattern](https://www.w3.org/WAI/ARIA/apg/patterns/combobox/)
