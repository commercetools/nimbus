# i18n Files ({component}.i18n.ts)

## Overview

Internationalization (i18n) files contain translatable message definitions for
components using react-intl. These files ensure consistent, accessible, and
translatable user interface text across all supported locales.

## Purpose

i18n files serve to:

- Define translatable strings for accessibility labels (aria-label,
  aria-description)
- Provide user-facing text that needs localization
- Ensure consistent message ID structure across the design system
- Support professional translation workflows via Transifex

## When to Use

### All Components Need i18n UNLESS:

- Component has **NO default labels or aria-labels set** (pure layout components
  like Box, Card, Stack)
- Component only renders children without adding accessibility text
- Component is purely styling/layout with no user-facing text

### Components That Need i18n:

- Components with **accessibility labels** (aria-label, aria-description)
- Components with **interactive elements** (buttons, inputs, controls)
- Components with **default placeholder text** or helper text
- Components with **tooltips or user-facing messages**

### Examples

**Components that DON'T need i18n:**

- Box, Card, Stack (pure layout)
- Badge (if no default aria-label)
- Divider, Separator (visual only)

**Components that DO need i18n:**

- Button (if sets default aria-label)
- NumberInput (increment/decrement labels)
- Alert (dismiss button label)
- DatePicker (input placeholders, button labels)

## File Structure

### Location

```
src/components/{component-name}/{component-name}.i18n.ts
```

### Basic Template

```typescript
import { defineMessages } from "react-intl";

export const messages = defineMessages({
  dismiss: {
    id: "Nimbus.Alert.dismiss",
    description: "aria-label for dismiss button in alert",
    defaultMessage: "Dismiss",
  },
  // Additional messages...
});
```

## Message ID Convention

All message IDs must follow the hierarchical naming pattern:

```
Nimbus.{ComponentName}.{messageKey}
```

### Examples

- `Nimbus.Alert.dismiss`
- `Nimbus.DatePicker.clearInput`
- `Nimbus.NumberInput.increment`
- `Nimbus.PasswordInput.show`

For nested or complex components:

```
Nimbus.{ComponentName}.{SubComponent}.{messageKey}
```

Example: `Nimbus.DatePicker.Time.enterTimeHour`

## Message Properties

Each message must include:

- **id**: Unique identifier following naming convention
- **description**: Developer-facing context (appears in translation files)
- **defaultMessage**: English fallback text

```typescript
{
  id: "Nimbus.Select.clearSelection",
  description: "aria-label for select clear button",
  defaultMessage: "Clear selection",
}
```

## Component Integration

### Import Pattern

```typescript
import { useIntl } from "react-intl";
import { messages } from "./{component}.i18n";
```

### Usage in Components

```typescript
import { messages } from "./component.i18n";

export const ComponentExample = (props: ComponentProps) => {
  const intl = useIntl();

  return (
    <button aria-label={intl.formatMessage(messages.label)} {...props}>
      Click me
    </button>
  );
};
```

### With Dynamic Values

```typescript
const label = intl.formatMessage(messages.itemsSelected, {
  count: selectedItems.length,
});
```

## Components with Multiple Parts

### Single i18n File Per Component

**Components with multiple internal parts share a single i18n file** regardless
of how many parts they have. All messages for the entire component (whether
compound components like Menu or complex single components like DatePicker) are
defined in one file.

```typescript
// alert.i18n.ts - Single file for entire Alert compound component
export const messages = defineMessages({
  dismiss: {
    id: "Nimbus.Alert.dismiss",
    description: "aria-label for dismiss button in Alert.DismissButton",
    defaultMessage: "Dismiss",
  },
  // Additional messages for other Alert parts...
});
```

## React Aria Integration

When using React Aria hooks, pass localized labels:

```typescript
const intl = useIntl();

const ariaProps = {
  ...functionalProps,
  incrementAriaLabel: intl.formatMessage(messages.increment),
  decrementAriaLabel: intl.formatMessage(messages.decrement),
};

const { inputProps, incrementButtonProps, decrementButtonProps } =
  useNumberField(ariaProps, state, ref);
```

## Supported Locales

Current support includes:

- `en` - English (default)
- `de` - German
- `es` - Spanish
- `fr-FR` - French (France)
- `pt-BR` - Portuguese (Brazil)

## Best Practices

### ✅ DO

- Use i18n for ALL user-facing text that needs translation
- Keep messages concise and clear
- Provide meaningful descriptions for translators
- Use proper grammar and punctuation in default messages
- Test with different locales to ensure proper text rendering

### Guidelines to Follow

- Always internationalize aria-labels and user-facing text
- Use clear, user-friendly language in default messages
- Keep translated strings intact (avoid concatenation)
- Design layouts to accommodate different text lengths across languages
- Use i18n only for user-facing content, not internal/debug messages

## Validation Checklist

When creating or reviewing i18n files:

- [ ] File follows naming convention: `{component}.i18n.ts`
- [ ] All message IDs follow pattern: `Nimbus.{Component}.{key}`
- [ ] Each message has id, description, and defaultMessage
- [ ] Descriptions clearly explain context for translators
- [ ] Default messages use proper grammar and punctuation
- [ ] **Messages exported using default export:
      `export default defineMessages({...})`** (preferred for new components)
- [ ] **Component assessed for i18n need: has default labels/aria-labels?**
- [ ] **Components with multiple parts use single shared i18n file**
- [ ] Component imports messages correctly (`import messages from` for default
      export)
- [ ] All user-facing text is internationalized
- [ ] aria-labels are properly localized
- [ ] No hardcoded strings in component

## Related Documentation

- [Main Component Guidelines](./main-component.md) - Component implementation
  with i18n
- [Accessibility Guidelines](./architecture-decisions.md) - Accessibility
  requirements
- [React Aria Integration](./architecture-decisions.md#react-aria-requirements) -
  Using React Aria with i18n

---

[← Back to Component Guidelines](../component-guidelines.md)
