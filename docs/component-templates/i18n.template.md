# i18n Template ({component}.i18n.ts)

Template for component internationalization **source file**. This file is used
for message extraction during build - components do NOT import this file at
runtime.

> **Note:** `.i18n.ts` files use `defineMessages` from `react-intl` because the
> extraction tool (`@formatjs/cli extract`) expects this format. `react-intl` is
> only a dev dependency, not a runtime dependency.

Replace: ComponentName, component-name

```typescript
/**
 * Internationalization messages for ComponentName
 * Replace: ComponentName, component-name
 */

import { defineMessages } from "react-intl";

export const messages = defineMessages({
  // Simple aria-label example
  dismiss: {
    id: "Nimbus.ComponentName.dismiss",
    description: "aria-label for dismiss button in component-name",
    defaultMessage: "Dismiss",
  },

  // Dynamic message with pluralization example
  itemsSelected: {
    id: "Nimbus.ComponentName.itemsSelected",
    description: "Label showing number of selected items",
    defaultMessage:
      "{count, plural, =0 {No items selected} =1 {1 item selected} other {# items selected}}",
  },
});

export default messages;
```

## Usage in Component

> **Important:** Components do NOT import `.i18n.ts` files. They import compiled
> `*.messages.ts` dictionaries generated by the build pipeline.

```typescript
import { useLocale } from "react-aria-components";
import { componentMessages } from "./component-name.messages";

export const ComponentName = (props: ComponentNameProps) => {
  const { locale } = useLocale();

  // Simple message
  const dismissLabel = componentMessages.getStringLocale("dismiss", locale);

  // Message with variables (use getVariableLocale)
  const itemsSelectedMessage = componentMessages.getVariableLocale(
    "itemsSelected",
    locale
  );

  const selectionLabel = itemsSelectedMessage
    ? itemsSelectedMessage({ count: selectedItems.length })
    : undefined;

  return (
    <div>
      <button aria-label={dismissLabel}>
        <CloseIcon />
      </button>
      <span>{selectionLabel}</span>
    </div>
  );
};
```

## Build Process

After creating the `.i18n.ts` file:

1. **Extract messages:** Run `pnpm extract-intl` to extract messages from
   `.i18n.ts` files → Creates/updates `packages/i18n/data/core.json`

2. **Translate:** Messages are translated via Transifex workflow → Updates
   `packages/i18n/data/*.json` files for each locale

3. **Compile:** Run `pnpm --filter @commercetools/nimbus-i18n build` to compile
   messages → Generates
   `packages/nimbus/src/components/{component}/{component}.messages.ts`

4. **Use in component:** Import and use the compiled message dictionary (see
   "Usage in Component" above)

## Checklist

**Source File (`.i18n.ts`):**

- [ ] File named `{component}.i18n.ts`
- [ ] All message IDs follow pattern `Nimbus.{ComponentName}.{key}`
- [ ] Each message has id, description, and defaultMessage
- [ ] Messages exported using: `export const messages = defineMessages({...})`
- [ ] Run `pnpm extract-intl` to extract messages to
      `packages/i18n/data/core.json`

**Component Usage:**

- [ ] Component imports message dictionary:
      `import { componentMessages } from "./component.messages"`
- [ ] Component uses `useLocale()` from `react-aria-components`
- [ ] Component calls `componentMessages.getStringLocale("key", locale)` for
      simple string messages
- [ ] Component calls `componentMessages.getVariableLocale("key", locale)` for
      variable messages
- [ ] All aria-labels are properly localized

---

[← Back to Templates Index](./index.md)
